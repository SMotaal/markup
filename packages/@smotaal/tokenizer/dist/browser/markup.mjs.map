{"version":3,"file":"markup.mjs","sources":["../../../packages/@smotaal/tokenizer/extended.js","../../../packages/@smotaal/tokenizer/browser/markup.js"],"sourcesContent":["export * from './tokenizer.js';\n\nimport {Parser} from './tokenizer.js';\nimport {modes} from './extensions/extensions.js';\n\nconst parser = new Parser();\nfor (const id in modes) parser.register(modes[id]);\n\nexport {modes};\n\nexport default parser;\n","import parser from '../extended.js';\nimport * as dom from '../extensions/dom.js';\n\nexport {encodeEntity, encodeEntities} from '../extensions/dom.js';\n\nconst versions = [parser];\nlet lastVersion;\n\nexport const tokenize = (source, options = {}) => {\n  const version = versions[options.version - 1] || versions[0];\n  options.tokenize = (version || parser).tokenize;\n  try {\n    return version.tokenize(source, {options});\n  } finally {\n    !version || lastVersion === (lastVersion = version);\n    // || console.info('Markup Version %O', version);\n  }\n};\n\nexport const render = async (source, options) => dom.render(tokenize(source, options), options && options.fragment);\n\nexport const warmup = (source, options) => {\n  const key = (options && JSON.stringify(options)) || '';\n  let cache = (warmup.cache || (warmup.cache = new Map())).get(key);\n  cache || warmup.cache.set(key, (cache = new Set()));\n  if (cache.has(source)) return;\n  for (const item of tokenize(source, options));\n  cache.add(source);\n};\n"],"names":["dom.render"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAKA,MAAM,MAAM,GAAG,IAAI,MAAM,EAAE,CAAC;AAC5B,KAAK,MAAM,EAAE,IAAI,KAAK,EAAE,MAAM,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC,CAAC;;ACDnD,MAAM,QAAQ,GAAG,CAAC,MAAM,CAAC,CAAC;AAC1B,AACA;AACA,AAAY,MAAC,QAAQ,GAAG,CAAC,MAAM,EAAE,OAAO,GAAG,EAAE,KAAK;EAChD,MAAM,OAAO,GAAG,QAAQ,CAAC,OAAO,CAAC,OAAO,GAAG,CAAC,CAAC,IAAI,QAAQ,CAAC,CAAC,CAAC,CAAC;EAC7D,OAAO,CAAC,QAAQ,GAAG,CAAC,OAAO,IAAI,MAAM,EAAE,QAAQ,CAAC;EAChD,IAAI;IACF,OAAO,OAAO,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC;GAC5C,SAAS;AACZ,AACA;GACG;CACF,CAAC;;AAEF,AAAY,MAAC,MAAM,GAAG,OAAO,MAAM,EAAE,OAAO,KAAKA,QAAU,CAAC,QAAQ,CAAC,MAAM,EAAE,OAAO,CAAC,EAAE,OAAO,IAAI,OAAO,CAAC,QAAQ,CAAC,CAAC;;AAEpH,AAAY,MAAC,MAAM,GAAG,CAAC,MAAM,EAAE,OAAO,KAAK;EACzC,MAAM,GAAG,GAAG,CAAC,OAAO,IAAI,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC;EACvD,IAAI,KAAK,GAAG,CAAC,MAAM,CAAC,KAAK,KAAK,MAAM,CAAC,KAAK,GAAG,IAAI,GAAG,EAAE,CAAC,EAAE,GAAG,CAAC,GAAG,CAAC,CAAC;EAClE,KAAK,IAAI,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,GAAG,KAAK,GAAG,IAAI,GAAG,EAAE,EAAE,CAAC;EACpD,IAAI,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,OAAO;EAC9B,KAAK,MAAM,IAAI,IAAI,QAAQ,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC,CAAC;EAC9C,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;CACnB;;;;"}